<!-- Sidebar overlay for mobile -->
<div class="sidebar-overlay"></div>
  
<!-- Sidebar -->
<div class="sidebar bg-white">
  <div class="sidebar-header">
    <h4 class="font-weight-bold mb-0">RETAIL Panel</h4>
    <p class="text-secondary mb-0">{{user.role}}</p>
  </div>
  
  <div class="sidebar-menu">

    {{#if (or (eq user.role "admin") (eq user.role "gudang") (eq user.role "kasir"))}}
      <a href="/dashboard" class="sidebar-menu-item {{#if isActivePage.dashboard}}active{{/if}}">
        <svg xmlns="http://www.w3.org/2000/svg" width="18px" height="18px" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
          <polyline points="9 22 9 12 15 12 15 22"/>
        </svg>
        Dashboard
      </a>
    {{/if}}

    {{#if (or (eq user.role "admin") (eq user.role "gudang"))}}
      <a href="/products" class="sidebar-menu-item {{#if isActivePage.products}}active{{/if}}">
        <svg xmlns="http://www.w3.org/2000/svg" width="18px" height="18px" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path d="M20 7l-8-4-8 4"/>
          <path d="M4 7v10l8 4 8-4V7"/>
          <line x1="12" y1="3" x2="12" y2="21"/>
        </svg>
        Product Management
      </a>
    {{/if}}

    {{#if (eq user.role "admin")}}
      <a href="/categories" class="sidebar-menu-item {{#if isActivePage.categories}}active{{/if}}">
        <svg xmlns="http://www.w3.org/2000/svg" width="18px" height="18px" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path d="M4 7h16"/>
          <path d="M4 12h16"/>
          <path d="M4 17h16"/>
          <circle cx="9" cy="7" r="1"/>
          <circle cx="9" cy="12" r="1"/>
          <circle cx="9" cy="17" r="1"/>
        </svg>
        Product Category Management
      </a>
    {{/if}}

    {{#if (eq user.role "admin")}}
      <a href="/users" class="sidebar-menu-item {{#if isActivePage.users}}active{{/if}}">
        <svg xmlns="http://www.w3.org/2000/svg" width="18px" height="18px" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
          <circle cx="9" cy="7" r="4"/>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
        </svg>
        Employee Management
      </a>
    {{/if}}
    
    {{#if (or (eq user.role "admin") (eq user.role "kasir"))}}
      <a href="/members" class="sidebar-menu-item {{#if isActivePage.members}}active{{/if}}">
        <svg xmlns="http://www.w3.org/2000/svg" width="18px" height="18px" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
          <circle cx="8.5" cy="7" r="4"/>
          <path d="M20 8v6"/>
          <path d="M23 11h-6"/>
        </svg>
        Member Management
      </a>
    {{/if}}
    
    {{#if (eq user.role "admin")}}
      <a href="/promotions" class="sidebar-menu-item {{#if isActivePage.promotions}}active{{/if}}">
        <svg xmlns="http://www.w3.org/2000/svg" width="18px" height="18px" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path d="M10.5 2l-8 4v12l8 4 8-4V6l-8-4z"/>
          <path d="M10.5 12L18 18"/>
          <path d="M10.5 12L3 18"/>
          <path d="M10.5 2v20"/>
        </svg>
        Promotion Management
      </a>
    {{/if}}

    {{#if (or (eq user.role "admin") (eq user.role "kasir"))}}
      <a href="/transactions" class="sidebar-menu-item {{#if isActivePage.transactions}}active{{/if}}">
        <svg xmlns="http://www.w3.org/2000/svg" width="18px" height="18px" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <rect x="2" y="5" width="20" height="14" rx="2"/>
          <line x1="2" y1="10" x2="22" y2="10"/>
          <line x1="6" y1="15" x2="6" y2="15"/>
          <line x1="10" y1="15" x2="10" y2="15"/>
          <line x1="14" y1="15" x2="14" y2="15"/>
          <line x1="18" y1="15" x2="18" y2="15"/>
        </svg>
        Transaction List
      </a>
    {{/if}}

    {{#if (or (eq user.role "admin") (eq user.role "kasir"))}}
      <a href="/pos" class="sidebar-menu-item {{#if isActivePage.pos}}active{{/if}}">
        <svg xmlns="http://www.w3.org/2000/svg" width="18px" height="18px" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path d="M4 9h16"/>
          <path d="M4 15h16"/>
          <rect x="2" y="3" width="20" height="18" rx="2"/>
          <circle cx="8" cy="12" r="1"/>
          <circle cx="16" cy="12" r="1"/>
        </svg>
        POS
      </a>
    {{/if}}
    
    <button id="logout-btn" class="btn btn-dark logout-btn">Logout</button>
  </div>
</div>

<!-- Logout Confirmation Modal -->
<div class="modal" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="logoutModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="logoutModalLabel">Logout Confirmation</h5>
        <button type="button" class="close" id="closeModalBtn" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Are you sure?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="cancelLogoutBtn">Cancel</button>
        <a href="/login" class="btn btn-primary">Yes</a>
      </div>
    </div>
  </div>
</div>

<!-- Add this JavaScript code at the end -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Get modal element
    const modal = document.getElementById('logoutModal');
    
    // Get logout button
    const logoutBtn = document.getElementById('logout-btn');
    
    // Get cancel button
    const cancelBtn = document.getElementById('cancelLogoutBtn');
    
    // Get close button (Ã—)
    const closeBtn = document.getElementById('closeModalBtn');
    
    // Function to show the modal
    function showModal() {
      modal.style.display = 'block';
      modal.classList.add('show');
      document.body.classList.add('modal-open');
      
      // Create backdrop
      const backdrop = document.createElement('div');
      backdrop.className = 'modal-backdrop fade show';
      document.body.appendChild(backdrop);
    }
    
    // Function to hide the modal
    function hideModal() {
      modal.style.display = 'none';
      modal.classList.remove('show');
      document.body.classList.remove('modal-open');
      
      // Remove backdrop
      const backdrop = document.querySelector('.modal-backdrop');
      if (backdrop) {
        document.body.removeChild(backdrop);
      }
    }
    
    // Add click event to logout button
    logoutBtn.addEventListener('click', function(e) {
      e.preventDefault();
      showModal();
    });
    
    // Add click event to cancel button
    cancelBtn.addEventListener('click', function() {
      hideModal();
    });
    
    // Add click event to close button
    closeBtn.addEventListener('click', function() {
      hideModal();
    });
    
    // Close modal when clicking outside
    window.addEventListener('click', function(event) {
      if (event.target === modal) {
        hideModal();
      }
    });
  });
</script>