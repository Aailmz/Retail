<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>{{title}}</title>
  
  <!-- Fonts and icons -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700|Noto+Sans:300,400,500,600,700,800|PT+Mono:300,400,500,600,700" rel="stylesheet" />
  
  <!-- CSS Files -->
  <link id="pagestyle" href="/css/corporate-ui-dashboard.css" rel="stylesheet" />
  <link id="pagestyle" href="/css/layout.css" rel="stylesheet" />
  
  <!-- Additional CSS specific to the page -->
  {% block additional_css %}{% endblock %}
</head>

<style>
        body, html {
    height: 100%;
    }

    /* Sidebar styles */
    .sidebar {
    width: 250px;
    position: fixed;
    top: 0;
    left: 0;
    height: 100vh;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
    z-index: 999;
    transition: transform 0.3s ease;
    }
    .sidebar-header {
    padding: 20px 15px;
    border-bottom: 1px solid #e9ecef;
    }
    .sidebar-menu {
    padding: 15px 0;
    }
    .sidebar-menu-item {
    padding: 12px 20px;
    display: flex;
    align-items: center;
    color: #344767;
    font-weight: 500;
    font-size: 1rem;
    transition: all 0.2s ease;
    }
    .sidebar-menu-item:hover {
    background-color: #f9fafb;
    color: #252f40;
    text-decoration: none;
    }
    .sidebar-menu-item.active {
    background-color: #e9ecef;
    color: #252f40;
    font-weight: 600;
    }
    .sidebar-menu-item svg {
    margin-right: 12px;
    }

    /* Main content styles */
    .main-content {
    margin-left: 250px;
    padding: 20px;
    min-height: 100vh;
    transition: margin-left 0.3s ease;
    }
    .navbar {
    box-shadow: 0 0 8px rgba(0,0,0,0.1);
    background-color: white;
    }
    .card-stats {
    transition: all 0.2s ease;
    }
    .card-stats:hover {
    transform: translateY(-5px);
    }
    .logout-btn {
    position: absolute;
    bottom: 20px;
    width: calc(100% - 40px);
    left: 20px;
    }

    /* Mobile menu toggle */
    .menu-toggle {
    display: none;
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    margin-right: 15px;
    }

    /* Responsive styles */
    @media (max-width: 991.98px) {
    .sidebar {
        transform: translateX(-100%);
    }
    
    .sidebar.active {
        transform: translateX(0);
    }
    
    .main-content {
        margin-left: 0;
        width: 100%;
    }
    
    .menu-toggle {
        display: block;
    }
    
    .sidebar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0,0,0,0.5);
        z-index: 998;
        display: none;
    }
    
    .sidebar-overlay.active {
        display: block;
    }
    }

    /* Additional responsive improvements */
    @media (max-width: 767.98px) {
    .card-stats {
        margin-bottom: 1rem;
    }
    
    .navbar .container-fluid {
        flex-direction: row;
    }
    
    .table-responsive {
        overflow-x: auto;
    }
    }
</style>

<body class="bg-gray-100">
  <!-- Sidebar overlay for mobile -->
  <div class="sidebar-overlay"></div>
  
  <!-- Include sidebar -->
  {% include 'components/sidebar.html' %}

  <!-- Main Content -->
  <div class="main-content bg-gray-100">
    <nav class="navbar navbar-expand-lg mb-4 p-3">
      <div class="container-fluid px-0">
        <div class="d-flex align-items-center">
          <button class="menu-toggle" id="menuToggle">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="3" y1="12" x2="21" y2="12"></line>
              <line x1="3" y1="6" x2="21" y2="6"></line>
              <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
          </button>
          <h4 class="font-weight-bold mb-0">{{pageTitle}}</h4>
        </div>
        <div class="ms-auto">
          <span class="font-weight-bold d-none d-sm-inline">Welcome, {{user.username}}</span>
          <span class="d-inline d-sm-none">{{user.username}}</span>
        </div>
      </div>
    </nav>
    
    <!-- Page specific content -->
    <div class="container-fluid px-0">
      {% block content %}{% endblock %}
    </div>
  </div>
  
  <!-- Core JS Files -->
  <script src="/js/core/popper.min.js"></script>
  <script src="/js/core/bootstrap.min.js"></script>
  
  <!-- Custom JavaScript for mobile responsiveness -->
  <script src="/js/layout.js"></script>
  
  <!-- Additional JavaScript specific to the page -->
  {% block additional_scripts %}{% endblock %}
</body>
</html>

<script>
    document.addEventListener('DOMContentLoaded', function() {
    const menuToggle = document.getElementById('menuToggle');
    const sidebar = document.querySelector('.sidebar');
    const sidebarOverlay = document.querySelector('.sidebar-overlay');
    const sidebarMenuItems = document.querySelectorAll('.sidebar-menu-item');
    
    // Toggle sidebar on menu button click
    menuToggle.addEventListener('click', function() {
        sidebar.classList.toggle('active');
        sidebarOverlay.classList.toggle('active');
        document.body.classList.toggle('overflow-hidden');
    });
    
    // Close sidebar when clicking outside
    sidebarOverlay.addEventListener('click', function() {
        sidebar.classList.remove('active');
        sidebarOverlay.classList.remove('active');
        document.body.classList.remove('overflow-hidden');
    });
    
    // Close sidebar when a menu item is clicked (on mobile)
    sidebarMenuItems.forEach(item => {
        item.addEventListener('click', function() {
        if (window.innerWidth < 992) {
            sidebar.classList.remove('active');
            sidebarOverlay.classList.remove('active');
            document.body.classList.remove('overflow-hidden');
        }
        });
    });
    
    // Handle resize events
    window.addEventListener('resize', function() {
        if (window.innerWidth >= 992) {
        sidebar.classList.remove('active');
        sidebarOverlay.classList.remove('active');
        document.body.classList.remove('overflow-hidden');
        }
    });
    });
</script>